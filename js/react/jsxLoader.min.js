// @link https://www.dataformsjs.com
// @author Conrad Sollitt (http://www.conradsollitt.com)
// @license MIT
!function(){"use strict";for(var tokenTypes={js:0,e_start:1,e_end:2,e_prop:3,e_value:4,e_child_text:5,e_child_js:6,e_child_whitespace:7,e_child_js_start:8,e_child_js_end:9},astTypes={program:0,js:1,createElement:2},enums=[tokenTypes,astTypes],n=0,m=enums.length;n<m;n++){var obj=enums[n];for(var prop in obj)obj.hasOwnProperty(prop)&&(obj[prop]=prop)}var jsxLoader={polyfillUrl:"https://polyfill.io/v3/polyfill.min.js?features=Array.from,Array.isArray,Object.assign,URL,fetch,Promise,Promise.prototype.finally,String.prototype.endsWith,String.prototype.startsWith,String.prototype.includes,String.prototype.repeat,WeakSet,Symbol",babelUrl:"https://unpkg.com/babel-standalone@6/babel.min.js",babelOptions:{presets:["es2015","stage-2","react"]},logCompileTime:!1,logCompileDetails:!1,evalCode:'"use strict"; class foo {}; let result = 1 + 1;',needsPolyfill:!(Array.from&&window.Promise&&window.fetch&&Promise.prototype.finally),jsUpdates:[{find:/export function/g,replace:"function"},{find:/export default class/g,replace:"class"},{find:/import React from 'react';/g,replace:""},{find:/import React from"react";/g,replace:""}],isSupportedBrowser:null,maxRecursiveCalls:1e3,usePreact:function(){this.jsUpdates.push({find:/ReactDOM\.render/g,replace:"preact.render"}),this.jsUpdates.push({find:/React\.Component/g,replace:"preact.Component"}),this.jsUpdates.push({find:/React\.Fragment/g,replace:"preact.Fragment"}),this.jsUpdates.push({find:/React\.createElement/g,replace:"preact.createElement"}),this.jsUpdates.push({find:/React\.cloneElement/g,replace:"preact.cloneElement"}),this.jsUpdates.push({find:/React\.createRef/g,replace:"preact.createRef"}),this.jsUpdates.push({find:/onChange:/g,replace:"onInput:"}),this.jsUpdates.push({find:/import preact from 'preact';/g,replace:""}),this.jsUpdates.push({find:/import preact from"preact";/g,replace:""}),this.addBabelPolyfills=function(){window.exports=window,window.require=function(e){switch(e){case"react":case"react-dom":return window.preact;default:return window[e]}}}},hasPendingScripts:function(){return 0<document.querySelectorAll('script[type="text/babel"]:not([data-added-to-page])').length},setup:function(){var e=document.querySelectorAll('script[type="text/babel"]:not([data-added-to-page])');if(1!==e.length){var t=[],n=[];Array.prototype.forEach.call(e,function(e){""===e.src?n.push(e):t.push(jsxLoader.loadScript(e))}),Promise.all(t).finally(function(){n.forEach(function(e){jsxLoader.loadScript(e)})})}else jsxLoader.loadScript(e[0])},loadScript:function(i){function n(e,t,n){var r,a,o=new Date;(jsxLoader.logCompileTime||jsxLoader.logCompileDetails)&&(console.log("=".repeat(80)),console.log(i.src),console.log("Start time: "+o.getTime()));try{a=jsxLoader.isSupportedBrowser?(r=jsxLoader.compiler.compile(e),"jsxLoader"):(r=Babel.transform(e,jsxLoader.babelOptions).code,"Babel")}catch(e){console.log("-".repeat(80)),console.log("Compile Error:"),console.log(i),console.error(e),i.setAttribute("data-error",e.toString()),r=null}if(jsxLoader.logCompileDetails&&console.log(r),jsxLoader.logCompileTime||jsxLoader.logCompileDetails){var s=new Date;console.log("End time: "+s.getTime()),console.log("Time taken (in milliseconds): "+(s.getTime()-o.getTime()))}if(null!==r){jsxLoader.jsUpdates.forEach(function(e){r=r.replace(e.find,e.replace)});var l=document.createElement("script");n&&l.setAttribute("data-src",n),l.setAttribute("data-compiler",a),l.innerHTML=r,document.head.appendChild(l),t()}else t()}return new Promise(function(t){if(""===i.src)return n(i.innerHTML,t),void i.setAttribute("data-added-to-page","");fetch(i.src,null,"text/plain").then(function(e){var t=e.status;if(200<=t&&t<300||304===t)return e.text();throw new Error("Error loading data. Server Response Code: "+t+", Response Text: "+e.statusText)}).then(function(e){n(e,t,i.getAttribute("src")),i.setAttribute("data-added-to-page","")}).catch(function(e){console.error(e),i.setAttribute("data-added-to-page",""),i.setAttribute("data-error",e.toString()),t()})})},addBabelPolyfills:function(){window.exports=window,window.require=function(e){switch(e){case"react":return window.React;case"react-dom":return window.ReactDOM;default:return window[e]}}},downloadScript:function(e,t){var n=document.createElement("script");n.onload=t,n.onerror=function(){console.error("Error loading Script: "+e),t()},n.src=e,document.head.appendChild(n)},compiler:{compile:function(e){if(this.isMinimized(e))return e;var t=this.removeComments(e),n=this.tokenizer(t);jsxLoader.logCompileDetails&&console.log(n);var r=this.parser(n,e);return jsxLoader.logCompileDetails&&console.log(r),this.codeGenerator(r,e)},getTextPosition:function(e,t){var n=e.substr(0,t).split("\n"),r=n.length,a=n[r-1];return" at Line #: "+r+", Column #: "+(a.length-1)+", Line: "+a.trim()},isMinimized:function(e){return-1===e.indexOf("\n")&&(-1!==e.indexOf("if(")||-1!==e.indexOf("}render(){return"))},removeComments:function(e){var t,n=e.length,r=new Array(n),a={inCommentReact:!1,inCommentSingleLine:!1,inCommentMultiLine:!1,inStringSingleQuote:!1,inStringDoubleQuote:!1,inStringMultiLine:!1},o=0;function s(){return o<n-1?e[o+1]:null}function l(){return o<n-2?e[o+1]+e[o+2]:null}for(;o<n;){if(t=e[o],a.inCommentReact)"*"===t&&"/}"===l()?(r[o]=" ",r[o+1]=" ",o+=2,t=" ",a.inCommentReact=!1):"\n"!==t&&(t=" ");else if(a.inCommentSingleLine)"\n"===t?a.inCommentSingleLine=!1:t=" ";else if(a.inCommentMultiLine)"*"==t&&"/"===s()?(r[o]=" ",o++,t=" ",a.inCommentMultiLine=!1):"\n"!==t&&(t=" ");else if(a.inStringDoubleQuote)'"'===t&&"\\"!==e[o-1]&&(a.inStringDoubleQuote=!1);else if(a.inStringSingleQuote)"'"===t&&"\\"!==e[o-1]&&(a.inStringSingleQuote=!1);else if(a.inStringMultiLine)"`"===t&&(a.inStringMultiLine=!1);else switch(t){case"{":"/*"===l()&&(r[o]=" ",r[o+1]=" ",o+=2,t=" ",a.inCommentReact=!0);break;case"/":var i=s();a.inCommentSingleLine="/"===i,a.inCommentSingleLine||(a.inCommentMultiLine="*"===i),(a.inCommentSingleLine||a.inCommentMultiLine)&&(r[o]=" ",o++,t=" ");break;case'"':a.inStringDoubleQuote=!0;break;case"'":a.inStringSingleQuote=!0;break;case"`":a.inStringMultiLine=!0}r[o]=t,o++}return r.join("")},tokenizer:function(a){var o,s,l,i=a.length,p=0,c=[],e=0,u=0;function t(){for(var e,t=p,n={inStringSingleQuote:!1,inStringDoubleQuote:!1,inStringMultiLine:!1};t<i-1;){if(e=a[t],n.inStringDoubleQuote)'"'===e&&"\\"!==a[t-1]&&(n.inStringDoubleQuote=!1);else if(n.inStringSingleQuote)"'"===e&&"\\"!==a[t-1]&&(n.inStringSingleQuote=!1);else if(n.inStringMultiLine)"`"===e&&(n.inStringMultiLine=!1);else switch(e){case'"':n.inStringDoubleQuote=!0;break;case"'":n.inStringSingleQuote=!0;break;case"`":n.inStringMultiLine=!0;break;case"<":if(" "!==a[t+1])return t}t++}return null}function d(){return p<i?a[p]:null}function m(){if(i<++e)throw new Error("Endless loop encountered in tokenizer")}function h(e,t){if(++u>jsxLoader.maxRecursiveCalls)throw new Error("Call count exceeded in tokenizer. If you have a large JSX file that is valid you can increase them limit using the property `jsxLoader.maxRecursiveCalls`.");var n={value:a[s],elementStack:0,elementState:[],currentElementState:null,inElement:!0,hasElementName:!1,elementClosed:!1,closeElement:!1,closingElement:!1,fatalError:!1,errorMessage:null,addElementEnd:!1,breakLoop:!1,addChild:!1,addChar:!0,hasProp:!1,inValue:!1,inPropString:!1,propStringChar:null,jsWithElement:!1};for(p<e&&t&&c.push({type:tokenTypes.js,value:a.substring(p,e),pos:p}),p=e+1;p<i;){if(m(),o=a[p],n.inElement){if(n.hasElementName)for(n.value+=o,p++,n.breakLoop=!1,n.hasProp=!1,n.inValue=!1;p<i;){switch(m(),o=a[p],p++,o){case"=":if(n.currentElementState.inPropJs||n.inPropString)break;""!==n.value.trim()&&(c.push({type:tokenTypes.e_prop,value:n.value,pos:p}),n.hasProp=!0,n.inValue=!0),n.value="",'"'===(l=d())||"'"===l?(n.inPropString=!0,n.propStringChar=l,p++):"{"===l&&(n.currentElementState.inPropJs=!0,n.currentElementState.jsPropBracketCount=0,p++);continue;case n.propStringChar:if(n.inPropString){n.inPropString=!1,c.push({type:n.hasProp?tokenTypes.e_value:tokenTypes.e_prop,value:JSON.stringify(n.value),pos:p}),n.inValue=!1,n.hasProp=!1,n.value="";continue}break;case"}":if(n.currentElementState.inPropJs){if(0===n.currentElementState.jsPropBracketCount){n.currentElementState.inPropJs=!1,""!==n.value.trim()&&(n.jsWithElement?(c.push({type:tokenTypes.e_child_js_end,value:n.value,pos:p}),n.jsWithElement=!1):">"!==n.value.trim()&&(c.push({type:tokenTypes.e_value,value:n.value,pos:p}),n.hasProp=!1)),n.inValue=!1,n.value="";continue}n.currentElementState.jsPropBracketCount--}break;case" ":case"\t":case"\r":case"\n":n.inPropString||n.currentElementState.inPropJs||(""!==n.value.trim()&&c.push({type:n.hasProp?tokenTypes.e_value:tokenTypes.e_prop,value:n.value,pos:p}),n.inValue=!1,n.value="");break;case"/":">"===d()&&(p--,n.breakLoop=!0,n.hasElementName=!1);break;case"<":n.currentElementState.inPropJs&&" "!==d()&&(""!==n.value.trim()&&(c.push({type:tokenTypes.e_child_js_start,value:n.value,pos:p}),n.value="",n.jsWithElement=!0),h(--p,!1),o="",n.jsWithElement&&p++);break;case"{":n.currentElementState.inPropJs&&n.currentElementState.jsPropBracketCount++;break;case">":n.currentElementState.inPropJs||(n.breakLoop=!0,n.hasElementName=!1)}if(n.breakLoop){if("/"===n.value&&">"===o&&c[c.length-1].type===tokenTypes.e_start){if(c.push({type:tokenTypes.e_end,value:n.value+o,pos:p}),n.elementStack<=1)return void("}"!==d()&&p--);n.elementStack--,n.elementState.pop(),n.currentElementState=0===n.elementStack?null:n.elementState[n.elementStack-1]}else if(">"===o&&(/^[a-zA-Z1-9-_]*$/.test(n.value)||/{\.\.\.(.+)}/.test(n.value))&&c[c.length-1].type===tokenTypes.e_start)c.push({type:tokenTypes.e_prop,value:n.value,pos:p});else if(""!==n.value.trim())throw console.log(c),new Error("Unhandled character in element properties: `"+n.value+"`"+jsxLoader.compiler.getTextPosition(a,p));n.value="",n.breakLoop=!1;break}n.value+=o}switch(o){case"/":""===n.value||"<"===n.value?n.closingElement=!0:">"===d()?(n.closeElement=!0,n.inElement=!1,n.addElementEnd=!0):(n.fatalError=!0,n.errorMessage='Error found a "/" character in element ['+n.value+'] but not closing "/>"'+jsxLoader.compiler.getTextPosition(a,p));break;case">":n.closeElement=!0,n.inElement=!1;break;case" ":case"\t":case"\n":case"\r":n.hasElementName=!0,n.closeElement=!0}}else{switch(o){case"}":n.currentElementState.inJs&&(0===n.currentElementState.jsBracketCount?(n.currentElementState.inJs=!1,n.currentElementState.closeJs=!0,n.addChild=!0,n.addChar=!1):n.currentElementState.jsBracketCount--);break;case"{":n.currentElementState.inJs?n.currentElementState.jsBracketCount++:(n.currentElementState.inJs=!0,n.currentElementState.jsBracketCount=0,n.addChild=!0,n.addChar=!1);break;case"<":" "!==d()&&(n.addChild=!0,n.inElement=!0)}if(n.addChild){if(""===n.value.trim())""!==n.value&&c.push({type:tokenTypes.e_child_whitespace,value:n.value,pos:p});else{var r=n.currentElementState.closeJs||n.currentElementState.inJs&&0<n.currentElementState.jsBracketCount||n.currentElementState.inJs&&n.inElement;c.push({type:r?tokenTypes.e_child_js:tokenTypes.e_child_text,value:n.value,pos:p})}n.addChild=!1,n.value="",n.currentElementState.closeJs&&(n.currentElementState.closeJs=!1,n.currentElementState.inJs=!1)}}if(n.closeElement?(" "!==o&&"\t"!==o&&"\n"!==o&&"\r"!==o&&(n.value+=o),n.closingElement?(c.push({type:tokenTypes.e_end,value:n.value,pos:p}),n.hasElementName=!1,n.elementStack--,n.elementState.pop(),n.currentElementState=0===n.elementStack?null:n.elementState[n.elementStack-1],0===n.elementStack&&(n.elementClosed=!0)):">"===n.value?p--:(c.push({type:tokenTypes.e_start,value:n.value,pos:p}),n.elementStack++,n.currentElementState={inJs:!1,jsBracketCount:0,closeJs:!1,inPropJs:!1,jsPropBracketCount:0},n.elementState.push(n.currentElementState)),n.value="",n.closeElement=!1,n.closingElement=!1,n.addElementEnd&&(c.push({type:tokenTypes.e_end,value:n.value,pos:null}),n.addElementEnd=!1)):(n.addChar&&(n.value+=o),n.addChar=!0),n.elementClosed)break;p++}if(n.fatalError)throw console.log(c),new Error(n.errorMessage)}for(;p<i;){if(m(),null===(s=t())){c.push({type:tokenTypes.js,value:a.substring(p,i),pos:p});break}h(s,!0),p++}return c},parser:function(p,c){var u=0,d={type:astTypes.program,body:[],pos:null},m=0,h=p.length;function f(e){if(++m>jsxLoader.maxRecursiveCalls)throw new Error("Call count exceeded in parser. If you have a large JSX file that is valid you can increase them limit using the property `jsxLoader.maxRecursiveCalls`.");var t=p[u];if(u++,t.type===tokenTypes.js)return{type:astTypes.js,value:t.value,pos:t.pos,stackCount:e};if(t.type!==tokenTypes.e_start)throw new Error("Tokens are out of order 2: ["+t.type+"], Token #: "+t.index+jsxLoader.compiler.getTextPosition(c,t.pos));for(var n,r=t.value.replace("<","").replace("/","").replace(">",""),a=r[0],o={type:astTypes.createElement,name:r,isClass:"A"<=a&&a<="Z"||-1!==r.indexOf("."),props:[],children:[],pos:t.pos,stackCount:e},s=!1;u<h;){switch(t=p[u],u++,t.type){case tokenTypes.e_prop:var l={name:t.value,value:null,pos:t.pos};switch(u<h?p[u].type:null){case tokenTypes.e_value:case tokenTypes.js:l.value=p[u].value,u++;break;case tokenTypes.e_start:l.value=f(e+1)}""!==l.name.trim()&&o.props.push(l);break;case tokenTypes.e_child_js:""!==t.value.trim()&&(0===(n=t.value.trim()).indexOf("{")&&(n=n.substr(1)),"}"===n.substr(n.length-1,1)&&(n=n.substr(0,n.length-1)),o.children.push({type:t.type,value:n,pos:t.pos}));break;case tokenTypes.e_child_js_start:case tokenTypes.e_child_js_end:o.children.push({type:t.type,value:n,pos:t.pos});break;case tokenTypes.e_child_text:""!==t.value.trim()&&o.children.push({type:t.type,value:t.value,pos:t.pos});break;case tokenTypes.e_child_whitespace:o.children.push({type:t.type,value:t.value,pos:t.pos});break;case tokenTypes.e_end:var i=t.value.replace("<","").replace("/","").replace(">","");if(i!==o.name&&""!==i)throw new Error("Found closing element ["+i+"] that does not match opening element ["+o.name+"] from Token # "+t.index+jsxLoader.compiler.getTextPosition(c,t.pos));s=!0;break;case tokenTypes.e_start:u--,o.children.push({type:tokenTypes.e_start,value:f(e+1),pos:t.pos});break;default:throw console.log(p),console.log(d),new Error("Tokens are out of order 1: ["+t.type+"], Token #: "+t.index+jsxLoader.compiler.getTextPosition(c,t.pos))}if(s)break}return o}for(var e=0;e<h;e++)p[e].index=e;for(;u<h;)d.body.push(f(0));return d},codeGenerator:function(e,t){var T="React.createElement",n=/(\/\/|\/\*|\/\*\*)\s+@jsx\s+([a-zA-z.]+)/gm.exec(t);return n&&(T=n[2]),function e(t,n){switch(t.type){case astTypes.program:return t.body.map(e).join("");case astTypes.js:return t.value;case astTypes.createElement:var r=T+"("+(t.isClass?t.name:JSON.stringify(t.name))+", ";0<t.stackCount&&(r=!0!==n?"\n"+" ".repeat(8)+" ".repeat(4*t.stackCount)+r:" "+r);var a,o=t.props.length,s=[];if(0===o)r+="null";else{r+="{";for(var l=0;l<o;l++){var i=t.props[l].value;null===i?i="true":"string"!=typeof i&&(i=e(i,!0)),-1!==(a=t.props[l].name.trim()).indexOf("-")&&(a=JSON.stringify(a)),"true"===i&&/{\.\.\.(.+)}/.test(a)?s.push(a.substr(0,a.length-1).substr(1)+(l===o-1?"":", ")):s.push(a+": "+i+(l===o-1?"":", "))}var p=s.reduce(function(e,t){return e+=t.length},0);if(80<p){var c="\n";!0!==n&&(c+=" ".repeat(12)+" ".repeat(4*t.stackCount)),r+=c+s.join(c)}else r+=s.join("");r+="}"}var u,d,m=[],h=!1,f=!1,g=!1,y=!1,v=t.children.length,S=null,k=0,j=!1,E=!0;for(d=0;d<v;d++)switch(t.children[d].type){case tokenTypes.e_child_js:case tokenTypes.e_child_js_start:f=!0,"string"==typeof(u=t.children[d].value)&&-1===u.indexOf("(")&&-1===u.indexOf(")")&&(E=!1);break;case tokenTypes.e_child_text:h=!0;break;case tokenTypes.e_start:g=!0,k++;break;case tokenTypes.e_child_whitespace:case tokenTypes.e_child_js_end:break;default:throw new Error("Unhandled child type codeGenerator(): "+t.children[d].type)}for(d=0;d<v;d++){switch(t.children[d].type){case tokenTypes.e_child_js:case tokenTypes.e_child_js_start:j?m[m.length-1]+=t.children[d].value:(m.push(t.children[d].value),y||1!==m.length||(y=!0));break;case tokenTypes.e_child_text:if(-1!==(u=t.children[d].value).indexOf("&")){var b=document.createElement("div");b.innerHTML=u,u=b.textContent}1===v?m.push(JSON.stringify(u)):d===v-1?m.push(JSON.stringify(u.replace(/\s+$/,""))):0===d?m.push(JSON.stringify(u.replace(/^\s+/,""))):m.push(JSON.stringify(u));break;case tokenTypes.e_child_js_end:m.push(t.children[d].value);break;case tokenTypes.e_start:var _=!1,x=!1;if(null!==S&&(_=t.children[S].type===tokenTypes.e_child_js),_){var w=t.children[S].value.trim();(w.endsWith("&&")||w.endsWith("?")||w.endsWith("(")||w.endsWith(":"))&&(m[m.length-1]+=e(t.children[d].value,_),k--,j=x=!0)}x||(m.push(e(t.children[d].value,_)),j=!1);break;case tokenTypes.e_child_whitespace:(f||h)&&0!==d&&d!==v-1&&(m.push(JSON.stringify(t.children[d].value)),j=!1);continue;default:throw new Error("Unhandled child type codeGenerator(): "+t.children[d].type)}S=d}return 0<m.length&&(r+=!h&&f&&g&&y&&1===k&&E?", "+m.join(""):", "+m.join(", ")),r+=")";default:throw new TypeError("Unhandled AST type in codeGenerator: "+t.type)}}(e)}}};window.jsxLoader=jsxLoader,document.addEventListener("DOMContentLoaded",function(){try{eval(jsxLoader.evalCode),jsxLoader.isSupportedBrowser=!0}catch(e){jsxLoader.isSupportedBrowser=!1}jsxLoader.isSupportedBrowser&&!1===jsxLoader.needsPolyfill?jsxLoader.setup():jsxLoader.isSupportedBrowser?jsxLoader.downloadScript(jsxLoader.polyfillUrl,function(){jsxLoader.setup()}):(jsxLoader.addBabelPolyfills(),jsxLoader.downloadScript(jsxLoader.polyfillUrl,function(){jsxLoader.downloadScript(jsxLoader.babelUrl,function(){jsxLoader.setup()})}))})}();