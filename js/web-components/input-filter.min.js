import{componentsAreSetup}from"./utils.js";class InputFilter extends HTMLInputElement{constructor(){super(),this.addEventListener("input",this.filter)}async connectedCallback(){await componentsAreSetup(),this.filter()}filter(){const t=this.value.toLowerCase().split(" "),e=t.length,s=0!==e;let l=0,r=null,i=null,n=document.querySelectorAll(this.getAttribute("filter-selector"));if(1===n.length&&"TABLE"===n[0].tagName&&n[0].tHead&&1===n[0].tHead.rows.length&&1===n[0].tBodies.length){const t=n[0];r=t.getAttribute("data-sort-class-odd"),i=t.getAttribute("data-sort-class-even"),n=n[0].tBodies[0].rows}const o=n.length,u=i&&r;for(const o of n){let n=!0;if(s){const s=o.textContent.toLowerCase();for(let l=0;l<e;l++)if(""!==t[l]&&!s.includes(t[l])){n=!1;break}}n&&(l++,u&&(l%2==0?(o.classList.add(i),o.classList.remove(r)):(o.classList.add(r),o.classList.remove(i)))),o.style.display=n?"":"none"}const c=this.getAttribute("filter-results-selector");if(c){const t=document.querySelector(c);if(!t)return void console.warn("Defined [filter-results-selector] but element not found");const e=this.getAttribute("filter-results-text-all"),s=this.getAttribute("filter-results-text-filtered");if(!e)return void console.warn("Defined [filter-results-selector] without [filter-results-text-all]");if(!s)return void console.warn("Defined [filter-results-selector] without [filter-results-text-filtered]");let r;r=(r=l===o?e:s.replace(/{displayCount}/g,l)).replace(/{totalCount}/g,o),t.textContent=r}}}window.customElements.define("input-filter",InputFilter,{extends:"input"});