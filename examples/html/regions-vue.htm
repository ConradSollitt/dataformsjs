<!--
    TODO - see comments in main file regarding [v-cloak] - currenting testing changes for Vue 3
    Later all examples need to work with both Vue 2 and 3
-->
<h3 v-if="isLoading" v-i18n="'Loading...'"></h3>
<p v-if="hasError"><span v-i18n="'Error'"></span> - {{ errorMessage }}</p>
<div v-if="isLoaded" class="flex-col">
    <h1><span v-i18n="'Regions for Country Code'"></span> {{ country }}</h1>
    
    <nav>
        <a v-bind:href="'#/' + i18n_Locale + '/'" v-i18n="'Countries'"></a>
    </nav>

    <!--
        TODO - Vue 3 - not yet working with latest beta
            Vue 3 (Beta 15), Line 11914 errors when using global `window` or other globals
                With Vue 2 the global `app` can be used
            Code line with error:
                const render = ( new Function(code)()
            A modified version of Vue 3 can be used when using `window.app` instead of `app`:
                Download the build verison (assumes Beta 15)
                Add Line 1938: 
                    push(`const window = _window\n`);
                Add Line 2000:
                    push(`const _window = window\n`);

            In the actual Vue source this would require changes in:
                https://github.com/vuejs/vue-next/blob/master/packages/compiler-core/src/codegen.ts
                Add Line 231:
                    push(`const window = _window\n`)
                Add Line 315:
                    push(`const _window = window\n`)

            Of course for the main Vue project tests would likely have to be updated and this
            could have unexpected side affects.
    -->
    <input data-filter-selector="table"
        data-filter-results-text-selector="h1"
        v-bind:data-filter-results-text-all="'{totalCount} ' + window.app.plugins.i18n.getText('Regions for Country Code') + ' ' + country"
        v-bind:data-filter-results-text-filtered="window.app.plugins.i18n.getText('Showing {displayCount} of {totalCount} Regions for Country Code') + ' ' + country"
        placeholder="Enter filter"
        v-i18n-attr="'placeholder'">

    <table data-sort data-sort-class-odd="row-odd" data-sort-class-even="row-even">
        <thead>
            <tr>
                <th v-i18n="'Code'"></th>
                <th v-i18n="'Name'"></th>
                <th v-i18n="'Population'"></th>
                <th v-i18n="'Timezone'"></th>
                <th v-i18n="'Date Last Modified'"></th>                               
            </tr>
        </thead>
        <tbody>
            <tr v-for="region in regions">
                <td><a v-bind:href="'#/' + i18n_Locale + '/cities/' + country + '/' + region.admin1_code">{{ region.admin1_code }}</a></td>
                <td>
                    <i v-bind:class="country.toLowerCase() + ' flag'"></i>
                    <span>{{ region.name }}</span>
                </td>
                <td class="align-right" v-bind:data-value="region.population" v-format-number="region.population"></td>
                <td>{{ region.timezone }}</td>
                <td class="align-right" v-format-date="region.modification_date"></td>
            </tr>
        </tbody>
    </table>
</div>
